<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:125%/1.45 'Quattrocento Sans',sans-serif;box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:'Quattrocento Sans',sans-serif;font-weight:400;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}h1{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;}h2{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;color:hsla(0,0%,0%,0.9);font-family:'Work Sans',sans-serif;font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}ul{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.45rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:0.85rem;line-height:1.45rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1rem;line-height:1.45rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0.90625rem;padding-right:0;padding-top:0;margin-bottom:1.45rem;font-size:1.1487rem;line-height:1.45rem;border-left:0.54375rem solid #3ab159;color:hsla(0,0%,0%,0.65);font-style:italic;}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(1.45rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.45rem;}b{font-weight:700;}strong{font-weight:700;}dt{font-weight:700;}th{font-weight:700;}li{margin-bottom:calc(1.45rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}li > ul{margin-left:1.45rem;margin-bottom:calc(1.45rem / 2);margin-top:calc(1.45rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(1.45rem / 2);}code{font-size:0.85rem;line-height:1.45rem;}kbd{font-size:0.85rem;line-height:1.45rem;}samp{font-size:0.85rem;line-height:1.45rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:0.96667rem;padding-right:0.96667rem;padding-top:0.725rem;padding-bottom:calc(0.725rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}a{color:#3ab159;text-decoration:none;text-shadow:none;background-image:none;}a:hover,a:active{text-shadow:none;background-image:none;}h1,h2,h3,h4,h5,h6{margin-top:2.175rem;margin-bottom:0.725rem;}blockquote > :last-child{margin-bottom:0;}blockquote cite{font-size:1rem;line-height:1.45rem;color:hsla(0,0%,0%,0.8);font-style:normal;font-weight:400;}blockquote cite:before{content:"— ";}@media only screen and (max-width:480px){html{font-size:106.25%;line-height:24.65px;}blockquote{border-left:0.27187rem solid #3ab159;color:hsla(0,0%,0%,0.59);padding-left:0.81563rem;font-style:italic;margin-left:-1.0875rem;margin-right:0;}}body,h1,h2,h3,h4,h5,h6{color:#dfdfdf;}a:hover,a:focus{color:#61c57b;}</style><style data-href="/styles.9e12c593a7dcbecbf087.css">@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:100;src:local("Work Sans Thin "),local("Work Sans-Thin"),url(/static/work-sans-latin-100-24f5a8074e3803a12982e22c831819fe.woff2) format("woff2"),url(/static/work-sans-latin-100-6f4dfce23e0e0a5d58de55b765d370e1.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:200;src:local("Work Sans Extra Light "),local("Work Sans-Extra Light"),url(/static/work-sans-latin-200-3006ae970881948027437c4bfde8dbaf.woff2) format("woff2"),url(/static/work-sans-latin-200-cfe3ca0acf6041e2d041fa5e78d25462.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:300;src:local("Work Sans Light "),local("Work Sans-Light"),url(/static/work-sans-latin-300-9952fbcb7e57e6b5568995f1906db693.woff2) format("woff2"),url(/static/work-sans-latin-300-4813464bf253bbfebb7c83240387072e.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Work Sans Regular "),local("Work Sans-Regular"),url(/static/work-sans-latin-400-238c66f0f32567f8b025fa462b139235.woff2) format("woff2"),url(/static/work-sans-latin-400-7da66178eb5f266e1d5a9c5c72344c51.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:500;src:local("Work Sans Medium "),local("Work Sans-Medium"),url(/static/work-sans-latin-500-de83f55b9291ee1bd05c8ebfb451e088.woff2) format("woff2"),url(/static/work-sans-latin-500-97a67d1aeb3c18ca193be4b4d4632546.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:600;src:local("Work Sans SemiBold "),local("Work Sans-SemiBold"),url(/static/work-sans-latin-600-dd4fdc27521a8dbf8c5fb5d3cc1e759d.woff2) format("woff2"),url(/static/work-sans-latin-600-1d85c87168a88c21786996793cf80368.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Work Sans Bold "),local("Work Sans-Bold"),url(/static/work-sans-latin-700-539ed1a07cb8b137b6825efd1789c2f3.woff2) format("woff2"),url(/static/work-sans-latin-700-bf12e11e6477f5cee412515ee11de0bf.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:800;src:local("Work Sans ExtraBold "),local("Work Sans-ExtraBold"),url(/static/work-sans-latin-800-734b1df3fa7949b89693621482f32b66.woff2) format("woff2"),url(/static/work-sans-latin-800-f5ef022da151d1d96a573fc699636e4b.woff) format("woff")}@font-face{font-family:Work Sans;font-style:normal;font-display:swap;font-weight:900;src:local("Work Sans Black "),local("Work Sans-Black"),url(/static/work-sans-latin-900-7c53f5d87a203dbcdae18408c2155887.woff2) format("woff2"),url(/static/work-sans-latin-900-276aab86dc8f226e783dc91073083c4b.woff) format("woff")}@font-face{font-family:Quattrocento Sans;font-style:normal;font-display:swap;font-weight:400;src:local("Quattrocento Sans Regular "),local("Quattrocento Sans-Regular"),url(/static/quattrocento-sans-latin-400-f9042c36d4c29ef78b60ea3b9fc4d8f3.woff2) format("woff2"),url(/static/quattrocento-sans-latin-400-044b97f04108f1c6835c2ecbbc0be210.woff) format("woff")}@font-face{font-family:Quattrocento Sans;font-style:italic;font-display:swap;font-weight:400;src:local("Quattrocento Sans Regular italic"),local("Quattrocento Sans-Regularitalic"),url(/static/quattrocento-sans-latin-400italic-27fc95214d4aa8893f02c7c414cf6bcc.woff2) format("woff2"),url(/static/quattrocento-sans-latin-400italic-40eb9fc5233c8d4b4c8bdade9ea95665.woff) format("woff")}@font-face{font-family:Quattrocento Sans;font-style:normal;font-display:swap;font-weight:700;src:local("Quattrocento Sans Bold "),local("Quattrocento Sans-Bold"),url(/static/quattrocento-sans-latin-700-7f02408bfd734f2f928efa102417383e.woff2) format("woff2"),url(/static/quattrocento-sans-latin-700-a09ad244035860c9c037fde492cbc036.woff) format("woff")}@font-face{font-family:Quattrocento Sans;font-style:italic;font-display:swap;font-weight:700;src:local("Quattrocento Sans Bold italic"),local("Quattrocento Sans-Bolditalic"),url(/static/quattrocento-sans-latin-700italic-9c8ad69a85a974a0d82f648a0acc161e.woff2) format("woff2"),url(/static/quattrocento-sans-latin-700italic-a52268ee293b4b2574ac9110e2f5a369.woff) format("woff")}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-].line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:0;font-size:100%;left:-3.8em;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-ms-user-select:none;user-select:none}.line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}body{background-color:#262626}hr{background:#dfdfdf}code[class*=language-],pre[class*=language-]{font-size:.85em}.gatsby-highlight-code-line{background-color:#44463c;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #ffec99;line-height:1.75}.gatsby-highlight{border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:initial;float:left;min-width:100%}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.8em}ol code[class*=language-text],p code[class*=language-text]{color:#e6db74}</style><meta name="generator" content="Gatsby 2.18.8"/><style type="text/css">.gatsby-resp-image-image{width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;color:transparent;}</style><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/icons/icon-48x48.png?v=64d312871de2361c47c158fc3a871916"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#663399"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=64d312871de2361c47c158fc3a871916"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=64d312871de2361c47c158fc3a871916"/><title data-react-helmet="true">Custom Angular Material Input Autocomplete form control | WhateverJS Blog</title><meta data-react-helmet="true" name="description" content="In this example I will use an Angular Material Autocomplete form control and show how to implement &lt;strong&gt;@angular/forms ControlValueAccessor&lt;/strong&gt; interface to build a custom form control. The form control will display a message (like an option) while it waits for results and a message when no results were found, finally it will render any template for options found using &lt;strong&gt;TemplateRefs&lt;/strong&gt;."/><meta data-react-helmet="true" property="og:title" content="Custom Angular Material Input Autocomplete form control"/><meta data-react-helmet="true" property="og:description" content="In this example I will use an Angular Material Autocomplete form control and show how to implement &lt;strong&gt;@angular/forms ControlValueAccessor&lt;/strong&gt; interface to build a custom form control. The form control will display a message (like an option) while it waits for results and a message when no results were found, finally it will render any template for options found using &lt;strong&gt;TemplateRefs&lt;/strong&gt;."/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" name="twitter:creator" content="Luis C. Ruiz"/><meta data-react-helmet="true" name="twitter:title" content="Custom Angular Material Input Autocomplete form control"/><meta data-react-helmet="true" name="twitter:description" content="In this example I will use an Angular Material Autocomplete form control and show how to implement &lt;strong&gt;@angular/forms ControlValueAccessor&lt;/strong&gt; interface to build a custom form control. The form control will display a message (like an option) while it waits for results and a message when no results were found, finally it will render any template for options found using &lt;strong&gt;TemplateRefs&lt;/strong&gt;."/><link as="script" rel="preload" href="/webpack-runtime-3416585bb6787042a4fb.js"/><link as="script" rel="preload" href="/styles-96925f8b37e31d5b2a19.js"/><link as="script" rel="preload" href="/app-09a8af213386c23a9159.js"/><link as="script" rel="preload" href="/commons-4a7d6a7efadeb5516b1b.js"/><link as="script" rel="preload" href="/component---src-templates-blog-post-js-b856c6fa7ee8f09dff60.js"/><link as="fetch" rel="preload" href="/page-data/angular-material-reusable-autocomplete/page-data.json" crossorigin="anonymous"/></head><body><noscript id="gatsby-noscript">This app works best with JavaScript enabled.</noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group" id="gatsby-focus-wrapper"><div style="margin-left:auto;margin-right:auto;max-width:46.4rem;padding:2.175rem 1.0875rem"><header><h3 style="margin-top:0"><a style="box-shadow:none;text-decoration:none;color:inherit" href="/">WhateverJS Blog</a></h3></header><main><article><header><h1 style="margin-top:1.45rem;margin-bottom:0">Custom Angular Material Input Autocomplete form control</h1><p style="font-size:0.87055rem;line-height:1.45rem;display:block;margin-bottom:1.45rem">December 22, 2019</p></header><section><p>Today I am going to build a reusable Angular Material Autocomplete form control component and show how to implement the <code class="language-text">ControlValueAccessor</code> interface from <strong><em>@angular/forms</em></strong> package. Besides that, in order to be able to display any layout for the autocomplete result options I am going to use a <strong>Dynamic Template Creation</strong> with the <code class="language-text">ngTemplateOutlet</code> directive.</p>
<p>This implementation comes from a real use case I had at my current job. The component works in Angular v8.</p>
<p>Let’s scaffold a component using <code class="language-text">angular-cli</code>:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">ng generate component input-autocomplete</code></pre></div>
<p>If you have not added Angular Material to your project you can do it with the next command:</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">ng <span class="token function">add</span> @angular/material</code></pre></div>
<p>To build the component you will need to import into your angular module the following modules: <code class="language-text">ReactiveFormsModule</code>, <code class="language-text">MatInputModule</code>, <code class="language-text">MatAutocompleteModule</code>, <code class="language-text">MatOptionModule</code>, <code class="language-text">MatIconModule</code>.
When I build reusable components I like to take the approach of creating an Angular Module to self-contain its dependencies and gain the ability of importing it anywhere I want. This is my component’s module:</p>
<div class="gatsby-highlight" data-language="javascript"><pre style="counter-reset: linenumber 0" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> CommonModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@angular/common"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@angular/core"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ReactiveFormsModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@angular/forms"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  MatAutocompleteModule<span class="token punctuation">,</span>
  MatIconModule<span class="token punctuation">,</span>
  MatInputModule<span class="token punctuation">,</span>
  MatOptionModule<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@angular/material"</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> InputAutocompleteComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./input-autocomplete.component"</span>

@<span class="token function">NgModule</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token punctuation">:</span> <span class="token punctuation">[</span>InputAutocompleteComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token punctuation">:</span> <span class="token punctuation">[</span>
    CommonModule<span class="token punctuation">,</span>
    ReactiveFormsModule<span class="token punctuation">,</span>
    MatInputModule<span class="token punctuation">,</span>
    MatAutocompleteModule<span class="token punctuation">,</span>
    MatOptionModule<span class="token punctuation">,</span>
    MatIconModule<span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token punctuation">:</span> <span class="token punctuation">[</span>InputAutocompleteComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">InputAutocompleteModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Now, let’s work in the component.</p>
<h3>Template:</h3>
<div class="gatsby-highlight has-highlighted-lines" data-language="html"><pre style="counter-reset: linenumber 0" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-form-field</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
    <span class="token attr-name">matInput</span>
    <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span>
    <span class="token attr-name">[matAutocomplete]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span>
    <span class="token attr-name">matAutocompletePosition</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>below<span class="token punctuation">"</span></span>
    <span class="token attr-name">[formControl]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>inputControl<span class="token punctuation">"</span></span>
    <span class="token attr-name">[placeholder]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>placeholder<span class="token punctuation">"</span></span>
    <span class="token attr-name">required</span>
  <span class="token punctuation">/></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-icon</span> <span class="token attr-name">matSuffix</span><span class="token punctuation">></span></span>search<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-icon</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-error</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>!inputControl.valid &amp;&amp; inputControl.errors?.required<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    This field is required
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-error</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-form-field</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-autocomplete</span>
  <span class="token attr-name">#auto</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>matAutocomplete<span class="token punctuation">"</span></span>
  <span class="token attr-name">autoActiveFirstOption</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span>
  <span class="token attr-name">[displayWith]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>displayFn<span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-option</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>isSearching; else optionsTemplate<span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>em</span><span class="token punctuation">></span></span>Searching...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>em</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-option</span><span class="token punctuation">></span></span>

<span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">#optionsTemplate</span><span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-option</span> <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>let option of options<span class="token punctuation">"</span></span> <span class="token attr-name">[value]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>option<span class="token punctuation">"</span></span><span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-container</span></span><span class="gatsby-highlight-code-line">        <span class="token attr-name">*ngTemplateOutlet</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>layoutTemplate; context: { option: option }<span class="token punctuation">"</span></span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-container</span><span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-option</span><span class="token punctuation">></span></span></span><span class="gatsby-highlight-code-line">  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">></span></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mat-option</span> <span class="token attr-name">*ngIf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>!isSearching &amp;&amp; noResults<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">disabled</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>true<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    No results found
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-option</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mat-autocomplete</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>To call your attention I highlighted the lines of code where the <code class="language-text">ngTemplateOutlet</code> is used. The inner <code class="language-text">ng-container</code> will render the template you want to project inside the component with the context passed, in this case each option object.</p>
<h3>Controller</h3>
<div class="gatsby-highlight has-highlighted-lines" data-language="javascript"><pre style="counter-reset: linenumber 0" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>
  ChangeDetectionStrategy<span class="token punctuation">,</span>
  ChangeDetectorRef<span class="token punctuation">,</span>
  Component<span class="token punctuation">,</span>
  ContentChild<span class="token punctuation">,</span>
  Input<span class="token punctuation">,</span>
  OnChanges<span class="token punctuation">,</span>
  OnInit<span class="token punctuation">,</span>
  Optional<span class="token punctuation">,</span>
  Self<span class="token punctuation">,</span>
  SimpleChanges<span class="token punctuation">,</span>
  TemplateRef<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/core'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  AbstractControl<span class="token punctuation">,</span>
  ControlValueAccessor<span class="token punctuation">,</span>
  FormControl<span class="token punctuation">,</span>
  NgControl<span class="token punctuation">,</span>
  ValidationErrors<span class="token punctuation">,</span>
  ValidatorFn<span class="token punctuation">,</span>
  Validators<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@angular/forms'</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> Observable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> debounceTime <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'rxjs/operators'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">Identifiable</span> <span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> string <span class="token operator">|</span> number<span class="token punctuation">;</span>
  label<span class="token punctuation">:</span> string<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Validates if the value passed has a code in order to be declared as an
 * object provided by material autocomplete options
 */</span>
<span class="token keyword">function</span> <span class="token function">isAutocompleteOption</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">:</span> Identifiable</span><span class="token punctuation">)</span><span class="token punctuation">:</span> boolean <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>value <span class="token operator">||</span> <span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> value<span class="token punctuation">.</span>id <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Validates the control value to have an `id` attribute. It is expected
 * control value to be an object.
 */</span>
<span class="token keyword">function</span> <span class="token function">containsIdValidation</span><span class="token punctuation">(</span><span class="token parameter">control<span class="token punctuation">:</span> AbstractControl</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ValidationErrors <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">isAutocompleteOption</span><span class="token punctuation">(</span>control<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token punctuation">:</span> <span class="token punctuation">{</span> required<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

@<span class="token function">Component</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token punctuation">:</span> <span class="token string">'input-autocomplete'</span><span class="token punctuation">,</span>
  templateUrl<span class="token punctuation">:</span> <span class="token string">'./input-autocomplete.component.html'</span><span class="token punctuation">,</span>
  styleUrls<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'./input-autocomplete.component.css'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  changeDetection<span class="token punctuation">:</span> ChangeDetectionStrategy<span class="token punctuation">.</span>OnPush<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">InputAutocompleteComponent</span>
<span class="gatsby-highlight-code-line">  <span class="token keyword">implements</span> <span class="token class-name">OnInit</span><span class="token punctuation">,</span> ControlValueAccessor<span class="token punctuation">,</span> OnChanges <span class="token punctuation">{</span></span>  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> placeholder<span class="token punctuation">:</span> string<span class="token punctuation">;</span>
  @<span class="token function">Input</span><span class="token punctuation">(</span><span class="token punctuation">)</span> options<span class="token punctuation">:</span> Identifiable<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  @<span class="token function">ContentChild</span><span class="token punctuation">(</span>TemplateRef<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token keyword">static</span><span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></span><span class="gatsby-highlight-code-line">  layoutTemplate<span class="token punctuation">:</span> TemplateRef<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token punctuation">;</span></span>
  <span class="token comment">// Inner form control to link input text changes to mat autocomplete</span>
  inputControl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormControl</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>validators<span class="token punctuation">)</span><span class="token punctuation">;</span>
  searchResults<span class="token punctuation">:</span> Observable<span class="token operator">&lt;</span>any<span class="token operator">></span><span class="token punctuation">;</span>
  noResults <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  isSearching <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="gatsby-highlight-code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span></span>    <span class="token parameter">@<span class="token function">Optional</span><span class="token punctuation">(</span><span class="token punctuation">)</span> @<span class="token function">Self</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">private</span> controlDir<span class="token punctuation">:</span> NgControl<span class="token punctuation">,</span>
    <span class="token keyword">private</span> changeDetectorRef<span class="token punctuation">:</span> ChangeDetectorRef<span class="token punctuation">,</span></span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>controlDir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>controlDir<span class="token punctuation">.</span>valueAccessor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>controlDir<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// Set validators for the outer ngControl equals to the inner</span>
      <span class="token keyword">const</span> control <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>controlDir<span class="token punctuation">.</span>control<span class="token punctuation">;</span>
      <span class="token keyword">const</span> validators <span class="token operator">=</span> control<span class="token punctuation">.</span>validator
        <span class="token operator">?</span> <span class="token punctuation">[</span>control<span class="token punctuation">.</span>validator<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputControl<span class="token punctuation">.</span>validator<span class="token punctuation">]</span>
        <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputControl<span class="token punctuation">.</span>validator<span class="token punctuation">;</span>
      control<span class="token punctuation">.</span><span class="token function">setValidators</span><span class="token punctuation">(</span>validators<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// Update outer ngControl status</span>
      control<span class="token punctuation">.</span><span class="token function">updateValueAndValidity</span><span class="token punctuation">(</span><span class="token punctuation">{</span> emitEvent<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">ngOnChanges</span><span class="token punctuation">(</span><span class="token parameter">changes<span class="token punctuation">:</span> SimpleChanges</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>changes<span class="token punctuation">.</span>options<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isSearching<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        <span class="token keyword">this</span><span class="token punctuation">.</span>isSearching <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>changes<span class="token punctuation">.</span>options<span class="token punctuation">.</span>firstChange <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>changes<span class="token punctuation">.</span>options<span class="token punctuation">.</span>currentValue<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span>noResults <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">this</span><span class="token punctuation">.</span>noResults <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span></span>  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Allows Angular to update the inputControl.
   * Update the model and changes needed for the view here.
   */</span>
  <span class="token function">writeValue</span><span class="token punctuation">(</span>obj<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    obj <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputControl<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Allows Angular to register a function to call when the inputControl changes.
   */</span>
  <span class="token function">registerOnChange</span><span class="token punctuation">(</span>fn<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token comment">// Pass the value to the outer ngControl if it has an id otherwise pass null</span>
<span class="gatsby-highlight-code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>inputControl<span class="token punctuation">.</span>valueChanges<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span><span class="token function">debounceTime</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">      <span class="token function-variable function">next</span><span class="token punctuation">:</span> <span class="token parameter">value</span> <span class="token operator">=></span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">isMinLength</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>isSearching <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">            <span class="token comment">/**</span><span class="gatsby-highlight-code-line">             * Fire change detection to display the searching status option</span><span class="gatsby-highlight-code-line">             */</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>changeDetectorRef<span class="token punctuation">.</span><span class="token function">detectChanges</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">            <span class="token function">fn</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>isSearching <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">            <span class="token keyword">this</span><span class="token punctuation">.</span>noResults <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line"></span><span class="gatsby-highlight-code-line">            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">          <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span><span class="gatsby-highlight-code-line">          <span class="token function">fn</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span></span><span class="gatsby-highlight-code-line">        <span class="token punctuation">}</span></span><span class="gatsby-highlight-code-line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span><span class="gatsby-highlight-code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Allows Angular to register a function to call when the input has been touched.
   * Save the function as a property to call later here.
   */</span>
  <span class="token function">registerOnTouched</span><span class="token punctuation">(</span>fn<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>onTouched <span class="token operator">=</span> fn<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Allows Angular to disable the input.
   */</span>
  setDisabledState<span class="token operator">?</span><span class="token punctuation">(</span>isDisabled<span class="token punctuation">:</span> boolean<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    isDisabled <span class="token operator">?</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputControl<span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputControl<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">/**
   * Function to call when the input is touched.
   */</span>
  <span class="token function">onTouched</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token comment">/**
   * Method linked to the mat-autocomplete `[displayWith]` input.
   * This is how result name is printed in the input box.
   */</span>
  <span class="token function">displayFn</span><span class="token punctuation">(</span>result<span class="token punctuation">:</span> Identifiable<span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token operator">|</span> <span class="token keyword">undefined</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> result <span class="token operator">?</span> result<span class="token punctuation">.</span>label <span class="token punctuation">:</span> <span class="token keyword">undefined</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">isMinLength</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">:</span> string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> value<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">2</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">private</span> <span class="token keyword">get</span> <span class="token function">validators</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> ValidatorFn<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>Validators<span class="token punctuation">.</span>required<span class="token punctuation">,</span> containsIdValidation<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>I try to write code to be self-explanatory and I hope you understand it.
Key takeaways:</p>
<ol>
<li>On line <strong>56</strong> the interface <code class="language-text">ControlValueAccessor</code> is declared to be implemented by the component.</li>
<li>On line <strong>60</strong> the component captures the template you want to project as the autocomplete option’s layout.</li>
<li>On line <strong>69</strong> the component constructor gets the instance of a <code class="language-text">NgControl</code>. This means you can use <code class="language-text">ngModel</code>
or a <code class="language-text">[formControl]</code> | <code class="language-text">formControlName</code>, template driven or reactive form respectively.</li>
<li>On line <strong>92</strong> <code class="language-text">ngOnChanges</code> turn off <code class="language-text">isSearching</code> state if the component receives options to display.
<code class="language-text">isSearching</code> state is triggered when the user types a string with a length greater than 2 characters.</li>
<li>
<p>On line <strong>117</strong> the <code class="language-text">inputControl</code> object (which is a <code class="language-text">FormControl</code> and receives updates from the input text)
communicates with the <code class="language-text">NgControl</code> instance mentioned before. The following cases use cases are handled here:</p>
<ol>
<li>When the user types the value is a <code class="language-text">string</code> and after length validation the value is passed
(what to do with the text? the component does not know, he does not care). Outside the component
you have to react to this value, fetch, and filter the values. Since this options are received as
a component input then they will be rendered.</li>
<li>When the component renders some options to click and the user chooses one then the value is passed
to the outer <code class="language-text">NgControl</code> instance. The value selected will remain unless the user cleans or removes
a character (that action will make the component to emit a <code class="language-text">string</code> value which then will provide
options to select).</li>
</ol>
</li>
</ol>
<p>Now, it is time show how to use the component.</p>
<div class="gatsby-highlight" data-language="html"><pre style="counter-reset: linenumber 0" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>example-form<span class="token punctuation">"</span></span> <span class="token attr-name">[formGroup]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>form<span class="token punctuation">"</span></span> <span class="token attr-name">(ngSubmit)</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit()<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input-autocomplete</span>
    <span class="token attr-name">formControlName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pokemon<span class="token punctuation">"</span></span>
    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Pokemon name<span class="token punctuation">"</span></span>
    <span class="token attr-name">[options]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pokemons$ | async<span class="token punctuation">"</span></span>
  <span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">let-option</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>option<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>pokemon-option<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">[src]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>option.sprite<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span> {{ option.label }}
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input-autocomplete</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input-autocomplete</span>
    <span class="token attr-name">formControlName</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swCharacter<span class="token punctuation">"</span></span>
    <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>SW character name<span class="token punctuation">"</span></span>
    <span class="token attr-name">[options]</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>swCharacters$ | async<span class="token punctuation">"</span></span>
  <span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ng-template</span> <span class="token attr-name">let-option</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>option<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      {{ option.label }} ({{option.gender}})
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ng-template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input-autocomplete</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">mat-raised-button</span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>primary<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Check this <a href="https://stackblitz.com/edit/angular-sbcm7h">Stackblitz</a> to see how it works.</p>
<h4>Future improvements</h4>
<p>This component can be improved if:</p>
<ol>
<li>You add an <code class="language-text">@Input</code> to set the text’s minimum length before triggering the search event.</li>
<li>You add an <code class="language-text">@Input</code> to set the text you want to display while options arrived, or the no results found text.
Use this hint if your app is multi-language, do not pollute the component adding a translate dependency.
The less the component knows the better.</li>
</ol>
<p>I did not code this improvements in this example because I wanted to keep it simple and where I work we don’t need them NOW.</p></section><hr style="margin-bottom:1.45rem"/><footer><div style="margin-bottom:3.625rem"><p>Written by <strong>Luis C. Ruiz</strong>. A proactive and disciplined Senior Web Developer with rock-solid programming skills in JavaScript.<a style="text-align:right;display:block" href="https://www.linkedin.com/in/inglkruiz">Read more about me on LinkedIn.</a></p></div></footer></article><nav><ul style="display:flex;flex-wrap:wrap;justify-content:space-between;list-style:none;padding:0;margin-left:0"><li><a rel="prev" href="/whatever-js/">← <!-- -->What is this Blog about?</a></li><li></li></ul></nav></main><footer>© <!-- -->2019<!-- -->, Built with<!-- --> <a href="https://www.gatsbyjs.org">Gatsby</a></footer></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/angular-material-reusable-autocomplete/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-09a8af213386c23a9159.js"],"component---node-modules-gatsby-plugin-offline-app-shell-js":["/component---node-modules-gatsby-plugin-offline-app-shell-js-25248a3ece515bddc791.js"],"component---src-templates-blog-post-js":["/component---src-templates-blog-post-js-b856c6fa7ee8f09dff60.js"],"component---src-pages-404-js":["/component---src-pages-404-js-31a64aa4d0648eac1c8c.js"],"component---src-pages-index-js":["/component---src-pages-index-js-55a6bcd53ccf7969cc6c.js"]};/*]]>*/</script><script src="/component---src-templates-blog-post-js-b856c6fa7ee8f09dff60.js" async=""></script><script src="/commons-4a7d6a7efadeb5516b1b.js" async=""></script><script src="/app-09a8af213386c23a9159.js" async=""></script><script src="/styles-96925f8b37e31d5b2a19.js" async=""></script><script src="/webpack-runtime-3416585bb6787042a4fb.js" async=""></script></body></html>